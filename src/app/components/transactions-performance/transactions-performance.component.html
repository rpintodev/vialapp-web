<mat-card class="cardWithShadow">
    <mat-card-content>
        <div class="d-flex">
            <div class="m-r-auto">
                <mat-card-title>Transacciones</mat-card-title>
            </div>
            <div class="d-flex">
            <div class="m-l-auto">
                <mat-form-field color="primary" appearance="outline" style="width:220px;">
                    <mat-label>DD/MM/YYYY</mat-label>
                    <input matInput [matDatepicker]="picker1" [value]="fechaSeleccionada" (dateChange)="onFechaChange($event)" />
                    <mat-datepicker-toggle matIconSuffix [for]="picker1"></mat-datepicker-toggle>
                    <mat-datepicker #picker1></mat-datepicker>
                </mat-form-field>
            </div>
                <div class="m-l-2">
                <mat-form-field appearance="outline" style="width:220px;">
                    <mat-select placeholder="Tipos Movimiento"  [value]="tipomovimientoSeleccionado" (selectionChange)="setTipoMovimientoSeleccionado($event)">
                        <mat-option *ngFor="let tipo of tipoMovimiento" [value]="tipo.id"  >
                            {{ tipo.nombre }}
                        </mat-option>
                    </mat-select>
                </mat-form-field>
                </div>
            </div>
        </div>
        <div class="table-responsive">
            <table mat-table [dataSource]="dataSource" class="w-100">
                <!-- Position Column -->
                <ng-container matColumnDef="supervisor">
                    <th mat-header-cell *matHeaderCellDef class="f-w-600 f-s-14 p-l-0">
                        Supervisor
                    </th>
                    <td mat-cell *matCellDef="let element" class="p-l-0">
                        <div class="d-flex align-items-center">
                            <img src="/assets/images/profile/user-4.jpg" alt="users" width="48" class="rounded" />
                            <div class="m-l-16">
                                <h6 class="f-s-14 f-w-600">
                                    {{ element.nombreSupervisor }}
                                </h6>
                                <span class=" f-s-12">
                                </span>
                            </div>
                        </div>
                    </td>
                </ng-container>

                <!-- Name Column -->
                <ng-container matColumnDef="cajero">
                    <th mat-header-cell *matHeaderCellDef class="f-w-600 f-s-7 p-l-0">
                        Cajero
                    </th>
                    <td mat-cell *matCellDef="let element" class="p-l-0">
                        <div class="d-flex align-items-center">
                            <img src="/assets/images/profile/user-1.jpg" alt="users" width="48" class="rounded" />
                            <div class="m-l-16">
                                <h6 class="f-s-14 f-w-600">
                                    {{ element.nombreCajero }}
                                </h6>
                                <span class=" f-s-12">
                                </span>
                            </div>
                        </div>
                    </td>
                </ng-container>

                <!-- Symbol Column -->
                <ng-container matColumnDef="tipoMovimiento">
                    <th mat-header-cell *matHeaderCellDef class="f-w-600 f-s-14">
                        Tipo Movimiento
                    </th>
                    <td mat-cell *matCellDef="let element">
                        @if(element.nombreMovimiento == 'Apertura') {
                        <span class="bg-light-success text-success rounded f-w-600 p-6 p-y-4 f-s-12">
                            {{ element.nombreMovimiento | titlecase }}
                        </span>
                        }

                        @if(element.nombreMovimiento == 'Retiros Parciales') {
                        <span class="bg-light-primary text-primary rounded f-w-600 p-6 p-y-4 f-s-12">
                            {{ element.nombreMovimiento | titlecase }}
                        </span>
                        }

                        @if(element.nombreMovimiento == 'Canje') {
                        <span class="bg-light-warning text-warning rounded f-w-600 p-6 p-y-4 f-s-12">
                            {{ element.nombreMovimiento | titlecase }}
                        </span>
                        }

                        @if(element.nombreMovimiento == 'Liquidacion') {
                        <span class="bg-light-error text-error rounded f-w-600 p-6 p-y-4 f-s-12">
                            {{ element.nombreMovimiento | titlecase }}
                        </span>
                        }
                        @if(element.nombreMovimiento == 'Fortius') {
                        <span class="bg-light-info text-info rounded f-w-600 p-6 p-y-4 f-s-12">
                            {{ element.nombreMovimiento | titlecase }}
                        </span>
                        }
                        @if(element.nombreMovimiento == 'Faltante') {
                        <span class="bg-light-warning text-warning rounded f-w-600 p-6 p-y-4 f-s-12">
                            {{ element.nombreMovimiento | titlecase }}
                        </span>
                        }
                        @if(element.nombreMovimiento == 'Tag') {
                        <span class="bg-light-error text-error rounded f-w-600 p-6 p-y-4 f-s-12">
                            {{ element.nombreMovimiento | titlecase }}
                        </span>
                        }
                    </td>
                </ng-container>

                <!-- Symbol Column -->
                <ng-container matColumnDef="fecha">
                    <th mat-header-cell *matHeaderCellDef class="f-w-600 f-s-14">
                        Fecha
                    </th>
                    <td mat-cell *matCellDef="let element">
                        {{ element.fecha | date:'HH:mm' }}
                    </td>
                </ng-container>

                <!-- Symbol Column -->
                <ng-container matColumnDef="monto">
                    <th mat-header-cell *matHeaderCellDef class="f-w-600 f-s-14">
                        Monto
                    </th>
                    <td mat-cell *matCellDef="let element">
                        {{ element.idTipoMovimiento=='1'||element.idTipoMovimiento=='5'?element.totalEntregado:element.totalRecibido }}
                    </td>
                </ng-container>

    

                <!-- Symbol Column -->
                <ng-container matColumnDef="via">
                    <th mat-header-cell *matHeaderCellDef class="f-w-600 f-s-14">
                        via
                    </th>
                    <td mat-cell *matCellDef="let element">
                        {{ element.via }}
                    </td>
                </ng-container>

                <ng-container matColumnDef="acciones" *ngIf="!isSettings">
                    <th mat-header-cell *matHeaderCellDef class="f-w-600 f-s-14">
                    Acciones
                    </th>
                    <td mat-cell *matCellDef="let element" class="p-0">
                    <div class="d-flex flex-sm-row flex-col align-items-center justify-content-center gap-8">
                        <button mat-mini-fab class="bg-primary text-white" aria-label="Editar" (click)="openTransactionView(element)">
                            <i-tabler name="eye" class="icon-20 d-flex"></i-tabler>
                        </button>
                    </div>
            
                    </td>
                </ng-container>
                <ng-container matColumnDef="acciones" *ngIf="isSettings">
                    <th mat-header-cell *matHeaderCellDef class="f-w-600 f-s-14">
                        Acciones
                    </th>
                    <td mat-cell *matCellDef="let element" class="p-0" >
                        <div class="d-flex flex-sm-row flex-col align-items-center justify-content-center gap-8">
                            <button [matMenuTriggerFor]="menu" mat-mini-fab class="bg-warning text-white" aria-label="Example icon button with a delete icon" >
                                <i-tabler class="icon-20 d-flex" name="settings"></i-tabler>
                            </button>
                            <mat-menu #menu="matMenu">
                                <button mat-menu-item (click)="openTransactionDetail(element)" >Editar</button>
                            </mat-menu>
                        </div>
                    </td>
                </ng-container>

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
            </table>
            <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons>
               
            </mat-paginator>
        </div>
    </mat-card-content>
</mat-card>